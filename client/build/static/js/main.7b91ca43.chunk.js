(this["webpackJsonpin-class-demo"]=this["webpackJsonpin-class-demo"]||[]).push([[0],{125:function(e,t,n){e.exports=n(240)},130:function(e,t,n){},131:function(e,t,n){},132:function(e,t,n){},133:function(e,t,n){},138:function(e,t,n){},143:function(e,t){},145:function(e,t){},183:function(e,t){},184:function(e,t){},240:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(44),o=n.n(c),l=(n(130),n(13)),i=(n(131),n(132),function(){return r.a.createElement("div",{className:"Header"},"To Do List")}),s=(n(133),function(){return r.a.createElement("div",{className:"Footer"},"By Andrew Kyllo")}),u=n(35),m=n(122),p=n(10),d=n.n(p),h=n(18);var f=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),o=Object(l.a)(c,2),i=o[0],s=o[1],p=Object(a.useState)([]),f=Object(l.a)(p,2),v=f[0],g=f[1],E=function(){var e=Object(h.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),r(!1),e.prev=2,e.next=5,fetch("http://localhost:3001/toDoList");case 5:return t=e.sent,e.next=8,t.json();case 8:n=e.sent,g(n),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r(e.t0.message);case 15:return e.prev=15,s(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){E()}),[]);var b=function(){var e=Object(h.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!t.completed,t.completed=n,e.prev=2,e.next=5,fetch("http://localhost:3001/toDoList/".concat(t.id),{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 5:a=v.map((function(e){return e.id===t.id?Object(u.a)({},e,{completed:n}):e})),g(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(h.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:3001/toDoList/".concat(t.id),{method:"delete",headers:{"Content-Type":"application/json"}});case 3:n=v.filter((function(e){return e.id!==t.id})),g(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return[v,n,i,function(e){g([].concat(Object(m.a)(v),[e]))},b,j]},v=n(17);var g=function(e){var t=Object(a.useState)({}),n=Object(l.a)(t,2),r=n[0],c=n[1];return[function(t){t&&t.preventDefault(),r.description&&r.difficulty&&r.assign&&e(r)},function(e){e.persist(),c((function(t){var n=e.target,a=n.name,r=n.value;return Object(u.a)({},t,Object(v.a)({},a,r))}))},{arbitrarykey:"arbitraryValue",onChange:function(e){e.persist(),c((function(t){var n,a=e.target,r=a.name,c=a.value;return Object(u.a)({},t,(n={},Object(v.a)(n,r,c),Object(v.a)(n,"completed",!1),n))}))}},r]},E=n(245),b=n(117),j=n(242);var y=function(e){function t(){return(t=Object(h.a)(d.a.mark((function t(){var n,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:3001/toDoList",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});case 2:return n=t.sent,t.next=5,n.json();case 5:a=t.sent,e.addEntry(a);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var n=g((function(){return t.apply(this,arguments)})),a=Object(l.a)(n,4),c=a[0],o=a[1],i=a[2],s=a[3];return r.a.createElement("div",{className:"NewEntry"},r.a.createElement(E.a,{onSubmit:c},r.a.createElement(E.a.Row,null,r.a.createElement(b.a,null,r.a.createElement(E.a.Control,Object.assign({type:"text",name:"description",placeholder:"Description"},i))),r.a.createElement(b.a,null,r.a.createElement(E.a.Control,{type:"number",name:"difficulty",placeholder:"Difficulty",onChange:o})),r.a.createElement(b.a,null,r.a.createElement(E.a.Control,Object.assign({type:"text",name:"assign",placeholder:"Assign"},i))),r.a.createElement(b.a,null,r.a.createElement(j.a,{type:"submit"},"Add to the list!")))))},O=n(24),k=n(25),x=n(26),C=n(27),w=r.a.createContext(),S=function(e){Object(C.a)(n,e);var t=Object(x.a)(n);function n(){var e;return Object(O.a)(this,n),(e=t.call(this)).changePagination=function(t){e.setState({resultsPerPage:t})},e.state={resultsPerPage:10,changePagination:e.changePagination},e}return Object(k.a)(n,[{key:"render",value:function(){return r.a.createElement(w.Provider,{value:this.state},this.props.children)}}]),n}(r.a.Component),P=(n(138),n(246)),D=n(243),L=n(244),N=function(e){return e.condition?e.children:null},T=n(68),I=n.n(T),A=n(118),H=n.n(A),B=r.a.createContext(),J=function(e){Object(C.a)(n,e);var t=Object(x.a)(n);function n(){var e;return Object(O.a)(this,n),(e=t.call(this)).setLoginState=function(t,n,a){e.setState({loggedIn:t,token:n,user:a}),I.a.save("auth",n||"")},e.login=function(){var t=Object(h.a)(d.a.mark((function t(n,a){var r,c,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat("http://localhost:3333","/signin"),{method:"post",headers:{"Content-Type":"application/json",Authorization:"Basic ".concat(btoa("".concat(n,":").concat(a)))}});case 3:return r=t.sent,t.next=6,r.json();case 6:c=t.sent,o=c.token,e.validateToken(o),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}(),e.validateToken=function(t){try{var n=H.a.verify(t,"fine, keep your secrets");e.setLoginState(!0,t,n)}catch(a){e.setLoginState(!1,null,{}),console.error("Token validation error:",a)}},e.logout=function(){console.log("hello"),e.setLoginState(!1,null,{})},e.state={loggedIn:!1,user:{},login:e.login,logout:e.logout},e}return Object(k.a)(n,[{key:"componentDidMount",value:function(){var e=I.a.load("auth");e&&this.validateToken(e)}},{key:"render",value:function(){return r.a.createElement(B.Provider,{value:this.state},this.props.children)}}]),n}(r.a.Component);var F=function(e){var t,n=Object(a.useContext)(B),c=n.loggedIn,o=n.user,l=!0;return e.permission&&(l=o.permissions&&o.permissions.includes(e.permission)),t=c&&l&&0!==Object.keys(o).ength,r.a.createElement(N,{condition:t},e.children)};var M=function(e){var t=e.error,n=e.isLoading,c=e.contents,o=e.completionHandler,i=e.deletionHandler,s=Object(a.useContext)(w),u=Object(a.useState)(0),m=Object(l.a)(u,2),p=m[0],d=m[1],h=p*s.resultsPerPage,f=h+s.resultsPerPage,v=c.slice(h,f);return r.a.createElement("div",{className:"ToDoList"},t&&r.a.createElement(P.a,{variant:"danger"},t),n?r.a.createElement(D.a,{animation:"grow"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{striped:!0,bordered:!0,hover:!0,variant:"dark"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"Difficulty"),r.a.createElement("th",null,"Assignment"),r.a.createElement("th",null))),r.a.createElement("tbody",null,v.map((function(e){return r.a.createElement("tr",{className:e.completed?"completed":"incomplete",key:e.id},r.a.createElement("td",null,e.id),r.a.createElement("td",null,e.description),r.a.createElement("td",null,e.difficulty),r.a.createElement("td",null,e.assign),r.a.createElement(F,{permission:"update"},r.a.createElement("td",null,r.a.createElement(j.a,{onClick:function(){return o(e)}},e.completed?"Set Incomplete":"Complete"))),r.a.createElement(F,{permission:"delete"},r.a.createElement("td",null,r.a.createElement(j.a,{variant:"outline-danger",onClick:function(){return i(e)}},"Delete"))))})))),p>0&&r.a.createElement(j.a,{variant:"outline-primary",onClick:function(){return d(p-1)}},"Previous"),c.length>f&&r.a.createElement(j.a,{variant:"outline-primary",onClick:function(){return d(p+1)}},"Next")))};function W(){var e=Object(a.useContext)(w);return r.a.createElement("div",null,"Number of entries to display per page: ",r.a.createElement("input",{type:"number",min:0,max:20,placeholder:10,onChange:function(t){return e.changePagination(t.target.value)}}))}var z=function(e){Object(C.a)(n,e);var t=Object(x.a)(n);function n(){var e;return Object(O.a)(this,n),(e=t.call(this)).handleChange=function(t){e.setState(Object(v.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.context.login(e.state.username,e.state.password),e.setState({username:"",password:""})},e.state={username:"",password:""},e}return Object(k.a)(n,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(N,{condition:this.context.loggedIn},r.a.createElement("button",{onClick:this.context.logout},"Log Out")),r.a.createElement(N,{condition:!this.context.loggedIn},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",placeholder:"Username",name:"username",onChange:this.handleChange}),r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",onChange:this.handleChange}),r.a.createElement("button",{value:"submit"},"Log In"))))}}]),n}(r.a.Component);z.contextType=B;var K=z;var R=function(){var e=f(),t=Object(l.a)(e,6),n=t[0],a=t[1],c=t[2],o=t[3],u=t[4],m=t[5];return r.a.createElement(J,null,r.a.createElement(S,null,r.a.createElement("div",{className:"App"},r.a.createElement(i,null),r.a.createElement(K,null),r.a.createElement("hr",null),r.a.createElement(F,{permission:"create"},r.a.createElement(y,{addEntry:o})),r.a.createElement(F,{permission:"read"},r.a.createElement(M,{completionHandler:u,deletionHandler:m,contents:n,error:a,isLoading:c}))),r.a.createElement(F,{permission:"read"},r.a.createElement(W,null)),r.a.createElement(s,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[125,1,2]]]);
//# sourceMappingURL=main.7b91ca43.chunk.js.map